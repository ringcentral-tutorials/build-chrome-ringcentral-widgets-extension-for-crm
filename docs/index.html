<!DOCTYPE html><html><head><title>Build Chrome RingCentral widgets extension for CRM- RingCentral Developer Tutorials</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" sizes="72x72" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" sizes="114x114" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/jquery-ui@1.12.1/themes/base/all.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div class="dpw-header-container"><div class="dpw-header center-section"><div class="logo"><a href="https://developers.ringcentral.com" class="logo-link"></a></div><div class="nav-top-menus"></div><div class="dpw-login-section"><a href="https://developer.ringcentral.com/login.html#/">Sign in | Sign up</a></div></div></div><div id="viewsaurus" data-title="Build Chrome RingCentral widgets extension for CRM"><div class="saurus-panes"><div class="saurus-panes-header"><a href="https://ringcentral.github.io/tutorials/" class="saurus-back-to-tutorials">Tutorials</a><span>&gt;</span><span>Build Chrome RingCentral widgets extension for CRM</span></div><div class="saurus-prose"><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw icon-menu"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Welcome to theBuild Chrome RingCentral widgets extension for CRM tutorial! In this tutorial you will be guided through the process of building Chrome RingCentral widgets extension for CRM with ringcentral-embeddable-extension-factory.
To get started, click the &quot;Start Tutorial&quot; button below.</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><style>#viewsaurus .saurus-prose ul {
  list-style-type: disc;
  list-style-position: inside;
}
#viewsaurus .saurus-prose ol { 
  list-style-type: decimal;
  list-style-position: inside;
}
#viewsaurus menu, #viewsaurus ol, #viewsaurus ul {
    padding: 0 0 0 15px;
}
#viewsaurus .saurus-prose {
  width: 50%;
}
#viewsaurus .saurus-code {
  left: 50%;
}</style><script>window.addEventListener('load', function() {
  document.querySelectorAll('.saurus-content a').forEach(function(dom) {
    dom.setAttribute('target', '_blank')
  })
})</script><div data-title="Build Chrome RingCentral widgets extension for CRM" class="chapter"><div data-title="Overview" data-file="../README.md" data-highlight="1-16" class="step"><h2 id="overview">Overview</h2>
<p>In this guided tutorial you will learn how to create Chrome RingCentral widgets extension for CRM. The guide is broken up into three sections:</p>
<ol start="0">
<li>What does Chrome RingCentral widgets extension for CRM do?</li>
<li>Learn how to setup, configure and get ready to development.</li>
<li>Learn how to Add advanced features to the extension</li>
</ol>
<p>When you are finished, you will be ready to create Chrome RingCentral widgets extension for CRMs.</p>
</div><div data-title="What does The extension for CRM do?" data-file="../README.md" data-highlight="17-48" class="step"><h2 id="what-does-chrome-ringcentral-widgets-extension-for-crm-do-">What does Chrome RingCentral widgets extension for CRM do?</h2>
<p><a href="https://github.com/embbnux">Embbnux Ji</a> has a tuturial: <a href="https://medium.com/ringcentral-developers/build-a-chrome-extension-with-ringcentral-embeddable-bb6faee808a3">Building Chrome Extension Integrations with RingCentral Embeddable</a>, with this tutorial, you could create Chrome extension for any site with RingCentral Embeddable, not just for CRM sites.</p>
<p>In this tutorial, we will show you the advanced features the extension could provide for CRM sites.</p>
<ul>
<li>For CRM contact phone number text, we make it click-to-call link.</li>
</ul>
<p><img src="https://github.com/ringcentral/ringcentral-embeddable-extension-factory/raw/master/screenshots/fac-1.png" alt=" "></p>
<ul>
<li>For CRM contact list, we will add a hover-to-show tooltip to show click-to-call button.</li>
</ul>
<p><img src="https://github.com/ringcentral/ringcentral-embeddable-extension-factory/raw/master/screenshots/fac-2.png" alt="cc"></p>
<ul>
<li>For CRM contact info page, we will add a click-to-call button in proper position.</li>
</ul>
<p><img src="https://github.com/ringcentral/ringcentral-embeddable-extension-factory/raw/master/screenshots/fac-3.png" alt=" "></p>
<ul>
<li>Sync CRM contacts to our widgets after user authorize.</li>
</ul>
<p><img src="https://github.com/zxdong262/insightly-embeddable-ringcentral-phone/raw/master/screenshots/insightly-4.png" alt=" "></p>
<ul>
<li>Sync call log to CRM automatically or manually.</li>
</ul>
<p><img src="https://github.com/zxdong262/hubspot-embeddable-ringcentral-phone/raw/master/screenshots/hs6.png" alt=" "></p>
<ul>
<li>Check CRM contact activities from our widgets.</li>
</ul>
<p><img src="https://github.com/zxdong262/hubspot-embeddable-ringcentral-phone/raw/master/screenshots/hs7.png" alt=" "></p>
<ul>
<li>Show CRM contact info panel when inbound/outbound call with CRM contact.</li>
</ul>
<p><img src="https://github.com/zxdong262/hubspot-embeddable-ringcentral-phone/raw/master/screenshots/hubspot1.png" alt=" "></p>
<h2 id="demo-video-insightly-">Demo video(Insightly)</h2>
<p><a href="https://youtu.be/Qfje5d5OdK0">https://youtu.be/Qfje5d5OdK0</a></p>
</div><div data-title="Init extension project" data-file="../README.md" data-highlight="68-99" class="step"><h2 id="init-extension-project">Init extension project</h2>
<p>You need nodejs 8.10+/npm, recommend using <a href="https://github.com/creationix/nvm">nvm</a> to install nodejs/npm.</p>
<p>Then let&#39;s create an extension project with our CLI tool: <a href="https://github.com/ringcentral/ringcentral-embeddable-extension-factory">ringcentral-embeddable-extension-factory</a>:</p>
<pre><code>npx ringcentral-embeddable-extension-factory my-app

# make sure you set `https://*.insightly.com/*` as url, we will use insightly as target CRM site.
</code></pre><ul>
<li>CLI tool promotes questions like name, decsription, url,</li>
<li>make sure you set <code>https://*.pipedrive.com/*</code> as url, since we will use pipedrive as target CRM site.</li>
</ul>
<p>Looks like this:</p>
<p><img src="https://github.com/ringcentral/ringcentral-embeddable-extension-factory/raw/master/screenshots/cli.png" alt=" "></p>
<p>And there is a <a href="https://youtu.be/2njQSk8x2K4">video</a> to show this too.</p>
<p>Then, after the project folder is created, install the necessary prerequisites:</p>
<pre><code>cd my-app

# install dependencies
npm i

# create local config file
cp config.sample.js config.js

# edit config.js, set `thirdPartyConfigs.serviceName` to `Pipedrive`

# let&#39;s build the extension
npm start

# now dist folder is ready for use as extension source
</code></pre></div><div data-title="Load extension to Chrome" data-file="../README.md" data-highlight="86-89" class="step"><h2 id="now-let-s-test-the-extension">Now let&#39;s test the extension</h2>
<ol>
<li>Go to Chrome extensions page.</li>
<li>Open developer mode</li>
<li>Load <code>dist</code> as unpacked package.</li>
<li>Go to the <a href="https://www.pipedrive.com">pipedrive.com</a>, login and check it.</li>
</ol>
</div><div data-title="Add advanced features to extension" data-file="../template/content.js" data-highlight="31-56" class="step"><h2 id="add-advanced-features-to-extension">Add advanced features to extension</h2>
<p>You can see that without any coding, currently we just add the <a href="https://github.com/ringcentral/ringcentral-embeddable">ringcentral-embeddable</a> Phone widgets, you call with it, but it is not interactive with CRM site yet, All those features listed in previous chapter need your coding efforts to make it work.</p>
<p>To make it easier, we already set common modules to reduce developer efforts, you could set proper selectors, methods to make all features to work:</p>
<ul>
<li>Edit <code>src/content.js</code> to make all features to work</li>
<li>Further more you can edit <a href="src/manifest.json">src/manifest.json</a> and <a href="src/background.js">src/background.js</a> to do more customization work.</li>
<li>And you can always read <a href="https://github.com/ringcentral-tutorials/build-chrome-ringcentral-widgets-extension-for-crm#realworld-code-examples">Realworld code examples</a> to get some hint about how to do it.</li>
</ul>
<p>In the following chapters, you will learn how exactly to make it work. This tutorial will take <a href="https://www.pipedrive.com">pipedrive.com</a> as target CRM site, they have a modern single page app site.</p>
<p>Before continuing, please register an free account, login and add some contacts with proper email and real contact number.</p>
</div><div data-title="Convert phone number text to click-to-call link" data-file="../src/content.js" data-highlight="7-7" class="step"><h2 id="convert-phone-number-text-to-click-to-call-link">Convert phone number text to click-to-call link</h2>
<p><img src="https://github.com/ringcentral/ringcentral-embeddable-extension-factory/raw/master/screenshots/fac-1.png" alt=" "></p>
<p>It is pretty simple, let&#39;s import config from <code>config.js</code>. we just need to find proper css selector.</p>
<p><img src="images/numbers.png" alt=" "></p>
<p>And edit <code>src/config.js</code> <code>phoneNumberSelectors</code> to be like this:</p>
<pre><code class="cm-s-monokai lang-js">  <span class="cm-comment">// modify phone number text to click-to-call link</span>
  <span class="cm-keyword">export</span> <span class="cm-keyword">const</span> <span class="cm-variable">phoneNumberSelectors</span> <span class="cm-operator">=</span> [
    <span class="cm-comment">///* example config</span>
    {
      <span class="cm-property">urlCheck</span>: (<span class="cm-def">href</span>) <span class="cm-operator">=&gt;</span> {
        <span class="cm-keyword">return</span> <span class="cm-string-2">/\/person\/\d+/</span>.<span class="cm-property">test</span>(<span class="cm-variable-2">href</span>)
      },
      <span class="cm-property">selector</span>: <span class="cm-string">&#39;[data-test=&quot;phone-label&quot;]&#39;</span>
    }
    <span class="cm-comment">//*/</span>
  ]
</code></pre>
<p>Then refresh extension in Chrome extension page, check in pipedrive.com&#39;s contact detail page.</p>
</div><div data-title="Add a click-to-call button in contact info page" data-file="../src/config.js" data-highlight="41-83" class="step"><h2 id="add-a-click-to-call-button-in-contact-info-page">Add a click-to-call button in contact info page</h2>
<p><img src="images/btn.png" alt=" "></p>
<p>And edit <code>src/config.js</code> <code>insertClickToCallButton</code> to be like this:</p>
<p>As you can see, pipedrive contact page just have all phone numbers info in dom,
so we can just extract them from dom, since the code is a bit long, please check this link to compare the code:</p>
<p><a href="https://github.com/zxdong262/pipedrive-embeddable-ringcentral-phone-spa/commit/059e90c4cbbacc72c86437d8c16c43c30589b854">source code compare</a></p>
<p>Then refresh extension in Chrome extension page, check in pipedrive.com&#39;s contact detail page.</p>
</div><div data-title="Practice: Add hover-to-show tooltip to show click-to-call button" data-file="../src/config.js" data-highlight="86-115" class="step"><h2 id="practice-add-hover-to-show-tooltip-to-show-click-to-call-button">Practice: Add hover-to-show tooltip to show click-to-call button</h2>
<p><img src="https://github.com/ringcentral/ringcentral-embeddable-extension-factory/raw/master/screenshots/fac-2.png" alt="cc"></p>
<p>If you get a sense of how the config works, now it is time to try it yourself.</p>
<p>Edit <code>src/config.js</code> <code>hoverShowClickToCallButton</code> function to make this feature work.</p>
<p>Think about your solution and compare with <a href="https://github.com/zxdong262/pipedrive-embeddable-ringcentral-phone-spa/commit/2ae121c266a44d555464080dd2e097ac7b59c7b6">source code</a></p>
</div><div data-title="Add third party features" data-file="../src/config.js" data-highlight="133-281" class="step"><h2 id="add-third-party-features">Add third party features</h2>
<p>After the warn up, now it is time to try the third party features.</p>
<p>Read our <a href="https://github.com/ringcentral/ringcentral-embeddable/blob/master/docs/third-party-service-in-widget.md">third party document</a> first.</p>
<p>If you want to try yourself, you could do it by edit <code>src/config.js</code>&#39;s <code>thirdPartyServiceConfig</code> and <code>initThirdParty</code> function.</p>
<p>In next chapter we will talk about authorization and sync contacts to RingCentral widgets.</p>
</div><div data-title="Add third party features: authorization and contacts" data-file="../src/config.js" data-highlight="18-24" class="step"><h2 id="add-third-party-features-authorization-and-contacts">Add third party features: authorization and contacts</h2>
<p><img src="https://github.com/zxdong262/insightly-embeddable-ringcentral-phone/raw/master/screenshots/insightly-4.png" alt=" "></p>
<p>It is a common practice that getting user authorization before accessing user data.</p>
<p>Since CRM site are so different, there is no common practice for this.</p>
<p>In general, if you could access user data as logined user from browser, no special action needed.</p>
<p>You may need to check network requests to find out how to get contacts list:</p>
<p><img src="images/network.png" alt=" "></p>
<p>So we can set proper method to get pipedrive&#39;s conatct list, check the <a href="https://github.com/zxdong262/pipedrive-embeddable-ringcentral-phone-spa/commit/de6d30091e2f5de9f032e3e83a117efa088ecf08">source code compare</a> to edit your code accordingly.</p>
<p>After finish editing, refresh extension in Chrome extension page, check in pipedrive.com&#39;s contacts page, click contacts panel of RingCentral widgets, click auth button and try to call some contacts.</p>
<p><img src="images/contacts.png" alt=" "></p>
</div><div data-title="Practice: The other third party features" data-file="../src/config.js" data-highlight="133-281" class="step"><h2 id="practice-the-other-third-party-features">Practice: The other third party features</h2>
<p>Since contacts and authorization are done, we will leave you to finish the Syncing call log and showing contact activities features as a practice.</p>
</div><div data-title="Practice: Additional settings" data-file="../src/background.js" data-highlight="1-17" class="step"><h2 id="practice-additional-settings">Practice: Additional settings</h2>
<p>Further more you can edit <code>src/manifest.json</code> and <a href="src/background.js">src/background.js</a> to do more customization work, such as filtered urls you do not want to show widgets etc.</p>
<p>That is all, thanks for reading!</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="../README.md" data-mode="markdown">IyBCdWlsZCBDaHJvbWUgUmluZ0NlbnRyYWwgd2lkZ2V0cyBleHRlbnNpb24gZm9yIENSTSA8IS0tIG9taXQgaW4gdG9jIC0tPgoKVGhpcyB0dXRvcmlhbCB3aWxsIHNob3cgeW91IGhvdyB0byBidWlsZCBDaHJvbWUgUmluZ0NlbnRyYWwgd2lkZ2V0cyBleHRlbnNpb24gZm9yIENSTSB3aXRoIFtyaW5nY2VudHJhbC1lbWJlZGRhYmxlLWV4dGVuc2lvbi1mYWN0b3J5XShodHRwczovL2dpdGh1Yi5jb20venhkb25nMjYyL3JpbmdjZW50cmFsLWVtYmVkZGFibGUtZXh0ZW5zaW9uLWZhY3RvcnkpCgojIyBUYWJsZSBvZiBDb250ZW50cyA8IS0tIG9taXQgaW4gdG9jIC0tPgoKLSBbV2hhdCBkb2VzIENocm9tZSBSaW5nQ2VudHJhbCB3aWRnZXRzIGV4dGVuc2lvbiBmb3IgQ1JNIGRvP10oI3doYXQtZG9lcy1jaHJvbWUtcmluZ2NlbnRyYWwtd2lkZ2V0cy1leHRlbnNpb24tZm9yLWNybS1kbykKLSBbRGVtbyB2aWRlbyhJbnNpZ2h0bHkpXSgjZGVtby12aWRlb2luc2lnaHRseSkKLSBbU2NyZWVuc2hvdHMoSW5zaWdodGx5IGFuZCBIdWJzcG90KV0oI3NjcmVlbnNob3RzaW5zaWdodGx5LWFuZC1odWJzcG90KQotIFtSZWFsd29ybGQgY29kZSBleGFtcGxlc10oI3JlYWx3b3JsZC1jb2RlLWV4YW1wbGVzKQotIFtDcmVhdGUgcHJvamVjdCB3aXRoIHJpbmdjZW50cmFsLWVtYmVkZGFibGUtZXh0ZW5zaW9uLWZhY3RvcnldKCNjcmVhdGUtcHJvamVjdC13aXRoLXJpbmdjZW50cmFsLWVtYmVkZGFibGUtZXh0ZW5zaW9uLWZhY3RvcnkpCi0gW0J1aWxkIGFuZCBVc2VdKCNidWlsZC1hbmQtdXNlKQotIFtNYWtlIHRoZSBmZWF0dXJlcyB3b3Jrc10oI21ha2UtdGhlLWZlYXR1cmVzLXdvcmtzKQotIFtCdWlsZCB3aXRoIGN1c3RvbSBSaW5nQ2VudHJhbCBjbGllbnRJRC9hcHBTZXJ2ZXJdKCNidWlsZC13aXRoLWN1c3RvbS1yaW5nY2VudHJhbC1jbGllbnRpZGFwcHNlcnZlcikKLSBbQ3JlZGl0c10oI2NyZWRpdHMpCi0gW0xpY2Vuc2VdKCNsaWNlbnNlKQoKIyMgV2hhdCBkb2VzIENocm9tZSBSaW5nQ2VudHJhbCB3aWRnZXRzIGV4dGVuc2lvbiBmb3IgQ1JNIGRvPwoKSW4gZ2VuZXJhbCwgQWxsIHRoZSB0aGlyZCBwYXJ0eSBmZWF0dXJlcyBvZiBvdXIgW3JpbmdjZW50cmFsLWVtYmVkZGFibGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9yaW5nY2VudHJhbC9yaW5nY2VudHJhbC1lbWJlZGRhYmxlKSBzdXBwb3J0ZWQgYW5kIHNvbWUgY29udGVudCBpbnNlcnQ6CgotIEZvciBDUk0gY29udGFjdCBwaG9uZSBudW1iZXIgdGV4dCwgd2UgbWFrZSBpdCBjbGljay10by1jYWxsIGxpbmsuCgohWyBdKGh0dHBzOi8vZ2l0aHViLmNvbS96eGRvbmcyNjIvcmluZ2NlbnRyYWwtZW1iZWRkYWJsZS1leHRlbnNpb24tZmFjdG9yeS9yYXcvbWFzdGVyL3NjcmVlbnNob3RzL2ZhYy0xLnBuZykKCi0gRm9yIENSTSBjb250YWN0IGluZm8gcGFnZSwgd2Ugd2lsbCBhZGQgYSBjbGljay10by1jYWxsIGJ1dHRvbiBpbiBwcm9wZXIgcG9zaXRpb24uCgohWyBdKGh0dHBzOi8vZ2l0aHViLmNvbS96eGRvbmcyNjIvcmluZ2NlbnRyYWwtZW1iZWRkYWJsZS1leHRlbnNpb24tZmFjdG9yeS9yYXcvbWFzdGVyL3NjcmVlbnNob3RzL2ZhYy0zLnBuZykKCi0gRm9yIENSTSBjb250YWN0IGxpc3QsIHdlIHdpbGwgYWRkIGEgaG92ZXItdG8tc2hvdyB0b29sdGlwIHRvIHNob3cgY2xpY2stdG8tY2FsbCBidXR0b24uCgohW2NjXShodHRwczovL2dpdGh1Yi5jb20venhkb25nMjYyL3JpbmdjZW50cmFsLWVtYmVkZGFibGUtZXh0ZW5zaW9uLWZhY3RvcnkvcmF3L21hc3Rlci9zY3JlZW5zaG90cy9mYWMtMi5wbmcpCgotIFN5bmMgQ1JNIGNvbnRhY3RzIHRvIG91ciB3aWRnZXRzIGFmdGVyIHVzZXIgYXV0aG9yaXplLgoKIVsgXShodHRwczovL2dpdGh1Yi5jb20venhkb25nMjYyL2luc2lnaHRseS1lbWJlZGRhYmxlLXJpbmdjZW50cmFsLXBob25lL3Jhdy9tYXN0ZXIvc2NyZWVuc2hvdHMvaW5zaWdodGx5LTQucG5nKQoKLSBTeW5jIGNhbGwgbG9nIHRvIENSTSBhdXRvbWF0aWNhbGx5IG9yIG1hbnVhbGx5LgoKIVsgXShodHRwczovL2dpdGh1Yi5jb20venhkb25nMjYyL2h1YnNwb3QtZW1iZWRkYWJsZS1yaW5nY2VudHJhbC1waG9uZS9yYXcvbWFzdGVyL3NjcmVlbnNob3RzL2hzNi5wbmcpCgotIENoZWNrIENSTSBjb250YWN0IGFjdGl2aXRpZXMgZnJvbSBvdXIgd2lkZ2V0cy4KCiFbIF0oaHR0cHM6Ly9naXRodWIuY29tL3p4ZG9uZzI2Mi9odWJzcG90LWVtYmVkZGFibGUtcmluZ2NlbnRyYWwtcGhvbmUvcmF3L21hc3Rlci9zY3JlZW5zaG90cy9oczcucG5nKQoKLSBTaG93IENSTSBjb250YWN0IGluZm8gcGFuZWwgd2hlbiBpbmJvdW5kL291dGJvdW5kIGNhbGwgd2l0aCBDUk0gY29udGFjdC4KCiFbIF0oaHR0cHM6Ly9naXRodWIuY29tL3p4ZG9uZzI2Mi9odWJzcG90LWVtYmVkZGFibGUtcmluZ2NlbnRyYWwtcGhvbmUvcmF3L21hc3Rlci9zY3JlZW5zaG90cy9odWJzcG90MS5wbmcpCgojIyBEZW1vIHZpZGVvKEluc2lnaHRseSkKCltodHRwczovL3lvdXR1LmJlL1FmamU1ZDVPZEswXShodHRwczovL3lvdXR1LmJlL1FmamU1ZDVPZEswKQoKIyMgU2NyZWVuc2hvdHMoSW5zaWdodGx5IGFuZCBIdWJzcG90KQoKfCBzY3JlZW5zaG90cyAgICAgICAgICAgIHwgIHNjcmVlbnNob3RzIHwKOi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS06fDotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tOgohW2luc2lnaHRseS0xXShodHRwczovL2dpdGh1Yi5jb20venhkb25nMjYyL2luc2lnaHRseS1lbWJlZGRhYmxlLXJpbmdjZW50cmFsLXBob25lL3Jhdy9tYXN0ZXIvc2NyZWVuc2hvdHMvaW5zaWdodGx5LTUucG5nKSB8ICFbaW5zaWdodGx5LTFdKGh0dHBzOi8vZ2l0aHViLmNvbS96eGRvbmcyNjIvaW5zaWdodGx5LWVtYmVkZGFibGUtcmluZ2NlbnRyYWwtcGhvbmUvcmF3L21hc3Rlci9zY3JlZW5zaG90cy9pbnNpZ2h0bHktNC5wbmcpCiFbaW5zaWdodGx5LTFdKGh0dHBzOi8vZ2l0aHViLmNvbS96eGRvbmcyNjIvaW5zaWdodGx5LWVtYmVkZGFibGUtcmluZ2NlbnRyYWwtcGhvbmUvcmF3L21hc3Rlci9zY3JlZW5zaG90cy9pbnNpZ2h0bHktMy5wbmcpIHwgIVtpbnNpZ2h0bHktMV0oaHR0cHM6Ly9naXRodWIuY29tL3p4ZG9uZzI2Mi9pbnNpZ2h0bHktZW1iZWRkYWJsZS1yaW5nY2VudHJhbC1waG9uZS9yYXcvbWFzdGVyL3NjcmVlbnNob3RzL2luc2lnaHRseS0yLnBuZykKIVtpbnNpZ2h0bHktMV0oaHR0cHM6Ly9naXRodWIuY29tL3p4ZG9uZzI2Mi9pbnNpZ2h0bHktZW1iZWRkYWJsZS1yaW5nY2VudHJhbC1waG9uZS9yYXcvbWFzdGVyL3NjcmVlbnNob3RzL2luc2lnaHRseS0xLnBuZykgfCAhW3hdKGh0dHBzOi8vZ2l0aHViLmNvbS96eGRvbmcyNjIvaHVic3BvdC1lbWJlZGRhYmxlLXJpbmdjZW50cmFsLXBob25lL3Jhdy9tYXN0ZXIvc2NyZWVuc2hvdHMvaHM2LnBuZykKIVt4XShodHRwczovL2dpdGh1Yi5jb20venhkb25nMjYyL2h1YnNwb3QtZW1iZWRkYWJsZS1yaW5nY2VudHJhbC1waG9uZS9yYXcvbWFzdGVyL3NjcmVlbnNob3RzL2hzNy5wbmcpIHwgIAoKIyMgUmVhbHdvcmxkIGNvZGUgZXhhbXBsZXMKCi0gW2luc2lnaHRseS1lbWJlZGRhYmxlLXJpbmdjZW50cmFsLXBob25lXShodHRwczovL2dpdGh1Yi5jb20venhkb25nMjYyL2luc2lnaHRseS1lbWJlZGRhYmxlLXJpbmdjZW50cmFsLXBob25lKQotIFtodWJzcG90LWVtYmVkZGFibGUtcmluZ2NlbnRyYWwtcGhvbmVdKGh0dHBzOi8vZ2l0aHViLmNvbS96eGRvbmcyNjIvaHVic3BvdC1lbWJlZGRhYmxlLXJpbmdjZW50cmFsLXBob25lKQoKIyMgQ3JlYXRlIHByb2plY3Qgd2l0aCByaW5nY2VudHJhbC1lbWJlZGRhYmxlLWV4dGVuc2lvbi1mYWN0b3J5CgpOZWVkIG5vZGVqcyA4LjEwKy9ucG0sIHJlY29tbWVuZCB1c2luZyBbbnZtXShodHRwczovL2dpdGh1Yi5jb20vY3JlYXRpb25peC9udm0pIHRvIGluc3RhbGwgbm9kZWpzL25wbS4KClRoZW4gbGV0J3MgY3JlYXRlIGFuIGV4dGVuc2lvbiBwcm9qZWN0IHdpdGggW3JpbmdjZW50cmFsLWVtYmVkZGFibGUtZXh0ZW5zaW9uLWZhY3RvcnldKGh0dHBzOi8vZ2l0aHViLmNvbS96eGRvbmcyNjIvcmluZ2NlbnRyYWwtZW1iZWRkYWJsZS1leHRlbnNpb24tZmFjdG9yeSk6CgpgYGBiYXNoCm5weCByaW5nY2VudHJhbC1lbWJlZGRhYmxlLWV4dGVuc2lvbi1mYWN0b3J5IG15LWFwcApgYGAKCkxvb2tzIGxpa2UgdGhpczoKCiFbIF0oaHR0cHM6Ly9naXRodWIuY29tL3p4ZG9uZzI2Mi9yaW5nY2VudHJhbC1lbWJlZGRhYmxlLWV4dGVuc2lvbi1mYWN0b3J5L3Jhdy9tYXN0ZXIvc2NyZWVuc2hvdHMvY2xpLnBuZykKCiMjIEJ1aWxkIGFuZCBVc2UKCjEuIGJ1aWxkIGBjb250ZW50LmpzYAoKYGBgYmFzaAoKIyBpbnN0YWxsIGRlcGVuZGVuY2llcywgcmVxdWlyZXMgbm9kZWpzOC4xMCsKbnBtIGkKCiMgY3JlYXRlIGNvbmZpZyBmaWxlLCBhbmQgc2V0IHByb3BlciB0aGlyZFBhcnR5Q29uZmlncy5zZXJ2aWNlTmFtZQpjcCBjb25maWcuc2FtcGxlLmpzIGNvbmZpZy5qcwoKIyB0aGVuIHJ1biBpdApucG0gc3RhcnQKCiMgZWRpdCBzcmMvKi5qcywgd2VicGFjayB3aWxsIGF1dG8tcmVidWlsZCwKIyBhZnRlciByZWJ1aWxkLCBkbyBub3QgZm9yZ2V0IHRvIHJlZnJlc2ggaW4gZXh0ZW5zaW9uIHBhZ2UKYGBgCgoxLiBHbyB0byBDaHJvbWUgZXh0ZW5zaW9ucyBwYWdlLgoyLiBPcGVuIGRldmVsb3BlciBtb2RlCjMuIExvYWQgYGRpc3RgIGFzIHVucGFja2VkIHBhY2thZ2UuCjQuIEdvIHRvIHRoZSBDUk0gc2l0ZSB0byBjaGVjawoKIyMgTWFrZSB0aGUgZmVhdHVyZXMgd29ya3MKCkZvciBub3cgaXQgaXMganVzdCBhIHdpZGdldCwgeW91IGNhbiBjYWxsIHdpdGggaXQsIHRvIG1ha2UgYWxsIHRoZSBmZWF0dXJlcyB3b3JrLCBzdGlsbCBuZWVkIG1vcmUgZGV2ZWxvcGVyIHdvcmsuCgpUbyBtYWtlIGl0IGVhc2llciwgd2UgYWxyZWFkeSBzZXQgY29tbW9uIG1vZHVsZXMgdG8gcmVkdWNlIGRldmVsb3BlciBlZmZvcnRzLCB5b3UgY291bGQgc2V0IHByb3BlciBzZWxlY3RvcnMsIG1ldGhvZHMgdG8gbWFrZSBhbGwgZmVhdHVyZXMgdG8gd29yazoKCi0gRWRpdCBbc3JjL2Nocm9tZS1leHRlbnNpb24vY29uZmlnLmpzXShzcmMvY2hyb21lLWV4dGVuc2lvbi9jb25maWcuanMpIHRvIG1ha2UgY2xpY2stdG8tY2FsbCByZWxhdGVkIGZlYXR1cmVzIHRvIHdvcmsKLSBGb2xsb3cgdGhlIGd1aWRlIGluIFtzcmMvY2hyb21lLWV4dGVuc2lvbi9mZWF0dXJlcy90aGlyZC1wYXJ0eS1hcGkuanNdKHNyYy9jaHJvbWUtZXh0ZW5zaW9uL2ZlYXR1cmVzL3RoaXJkLXBhcnR5LWFwaS5qcykgdG8gbWFrZSBhbGwgdGhpcmQgcGFydHkgZmVhdHVyZXMgdG8gd29yay4KLSBGdXJ0aGVyIG1vcmUgeW91IGNhbiBlZGl0IFtkaXN0L21hbmlmZXN0Lmpzb25dKGRpc3QvbWFuaWZlc3QuanNvbikgYW5kIFtkaXN0L2JhY2tncm91bmQuanNdKGRpc3QvYmFja2dyb3VuZC5qcykgdG8gZG8gbW9yZSBjdXN0b21pemF0aW9uIHdvcmsuCi0gQW5kIHlvdSBjYW4gYWx3YXlzIHJlYWQgW1JlYWx3b3JsZCBjb2RlIGV4YW1wbGVzXSgjcmVhbHdvcmxkLWNvZGUtZXhhbXBsZXMpIHRvIGdldCBzb21lIGhpbnQgYWJvdXQgaG93IHRvIGRvIGl0LgoKIyMgQnVpbGQgd2l0aCBjdXN0b20gUmluZ0NlbnRyYWwgY2xpZW50SUQvYXBwU2VydmVyCgotIENyZWF0ZSBhbiBhcHAgZnJvbSBbaHR0cHM6Ly9kZXZlbG9wZXIucmluZ2NlbnRyYWwuY29tL10oaHR0cHM6Ly9kZXZlbG9wZXIucmluZ2NlbnRyYWwuY29tLyksIG1ha2Ugc3VyZSB5b3UgY2hvb3NlIGEgYnJvd3NlciBiYXNlZCBhcHAsIGFuZCBzZXQgYWxsIHBlcm1pc3Npb25zLCBhbmQgYWRkIGBodHRwczovL3JpbmdjZW50cmFsLmdpdGh1Yi5pby9yaW5nY2VudHJhbC1lbWJlZGRhYmxlL3JlZGlyZWN0Lmh0bWxgIHRvIHlvdXIgcmVkaXJlY3QgVVJJIGxpc3QsIEVkaXQgYGNvbmZpZy5qc2AuCgotIEZpbGwgeW91ciBSaW5nQ2VudHJhbCBhcHAncyBjbGllbnRJRCBhbmQgYXBwU2VydmVyIGluIGBjb25maWcuanNgLgoKYGBganMKCiAgcmluZ0NlbnRyYWxDb25maWdzOiB7CiAgICAvLyB5b3VyIHJpbmdDZW50cmFsIGFwcCdzIENsaWVudCBJRAogICAgY2xpZW50SUQ6ICd5b3VyLWNsaWVudElEJywKCiAgICAvLyB5b3VyIHJpbmdDZW50cmFsIGFwcCdzIEF1dGggU2VydmVyIFVSTAogICAgYXBwU2VydmVyOiAneW91ciByaW5nQ2VudHJhbCBhcHAgQXV0aCBTZXJ2ZXIgVVJMJwogIH0sCmBgYAoKIyMgQ3JlZGl0cwoKQ3JlYXRlZCB3aXRoIFtFbWJibnV4IEppXShodHRwczovL2dpdGh1Yi5jb20vZW1iYm51eCkncyB0dXR1cmlhbDoKIFtCdWlsZGluZyBDaHJvbWUgRXh0ZW5zaW9uIEludGVncmF0aW9ucyB3aXRoIFJpbmdDZW50cmFsIEVtYmVkZGFibGVdKGh0dHBzOi8vbWVkaXVtLmNvbS9yaW5nY2VudHJhbC1kZXZlbG9wZXJzL2J1aWxkLWEtY2hyb21lLWV4dGVuc2lvbi13aXRoLXJpbmdjZW50cmFsLWVtYmVkZGFibGUtYmI2ZmFlZTgwOGEzKQoKIyMgTGljZW5zZQoKTUlUCg==</textarea>
<textarea class="saurus-file" data-file="../template/content.js" data-mode="javascript">Ci8qKgogKiBjb250ZW50LmpzIGZvciBjaHJvbWUgZXh0ZW5zaW9uCiAqLwoKaW1wb3J0IGNyZWF0ZUFwcCBmcm9tICdyaW5nY2VudHJhbC1lbWJlZGRhYmxlLWV4dGVuc2lvbi1jb21tb24vc3JjL3NwYS9pbml0JwovL2ltcG9ydCAqIGFzIGNvbmZpZyBmcm9tICcuL2NvbmZpZycKaW1wb3J0IHtyaW5nQ2VudHJhbENvbmZpZ3N9IGZyb20gJ3JpbmdjZW50cmFsLWVtYmVkZGFibGUtZXh0ZW5zaW9uLWNvbW1vbi9zcmMvY29tbW9uL2FwcC1jb25maWcnCmltcG9ydCAncmluZ2NlbnRyYWwtZW1iZWRkYWJsZS1leHRlbnNpb24tY29tbW9uL3NyYy9zcGEvc3R5bGUuc3R5bCcKaW1wb3J0ICcuL2N1c3RvbS5zdHlsJwoKbGV0IHsKICBjbGllbnRJRCwKICBhcHBTZXJ2ZXIKfSA9IHJpbmdDZW50cmFsQ29uZmlncwoKbGV0IGFwcENvbmZpZ1F1ZXJ5ID0gJycKaWYgKGNsaWVudElEIHx8IGFwcFNlcnZlcikgewogIGFwcENvbmZpZ1F1ZXJ5ID0gYD9jbGllbnRJRD0ke2NsaWVudElEfSZhcHBTZXJ2ZXI9JHtlbmNvZGVVUklDb21wb25lbnQoYXBwU2VydmVyKX1gCn0KCi8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSAqLwo7KGZ1bmN0aW9uKCkgewogIGNvbnNvbGUubG9nKCdpbXBvcnQgUmluZ0NlbnRyYWwgRW1iZWRkYWJsZSBWb2ljZSB0byB3ZWIgcGFnZScpCiAgdmFyIHJjcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpCiAgcmNzLnNyYyA9ICdodHRwczovL3JpbmdjZW50cmFsLmdpdGh1Yi5pby9yaW5nY2VudHJhbC1lbWJlZGRhYmxlL2FkYXB0ZXIuanMnICsgYXBwQ29uZmlnUXVlcnkKICB2YXIgcmNzMCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXQogIHJjczAucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocmNzLCByY3MwKQp9KSgpCgpsZXQgY29uZmlnID0gewogIC8vIGNvbmZpZyBmb3IgaW5zZXJ0IGNsaWNrIHRvIGNhbGwgYnV0dG9uLCBjaGVjayAuL2NvbmZpZy5qcyBpbnNlcnRDbGlja1RvQ2FsbEJ1dHRvbiAgZm9yIGRldGFpbAogIGluc2VydENsaWNrVG9DYWxsQnV0dG9uOiBbXSwKCiAgLy8gY29uZmlnIGZvciBob3ZlciBjb250YWN0IG5vZGUgdG8gc2hvdyBjbGljayB0byBkaWFsIHRvb2x0aXAsIGNoZWNrIC4vY29uZmlnLmpzIGhvdmVyU2hvd0NsaWNrVG9DYWxsQnV0dG9uIGZvciBkZXRhaWwKICBob3ZlclNob3dDbGlja1RvQ2FsbEJ1dHRvbjogW10sCgogIC8vIGNvbmZpZyBmb3IgbW9kaWZ5IHBob25lIG51bWJlciB0ZXh0IHRvIGNsaWNrLXRvLWNhbGwgbGluaywgY2hlY2sgLi9jb25maWcuanMgcGhvbmVOdW1iZXJTZWxlY3RvcnMgZm9yIGRldGFpbAogIHBob25lTnVtYmVyU2VsZWN0b3JzOiBbXSwKCiAgLy8gdGhpcmQgcGFydHkgZmVhdHVyZSBjb25maWcsIGNoZWNrIC4vY29uZmlnLmpzIHRoaXJkUGFydHlTZXJ2aWNlQ29uZmlnIGZ1bmN0aW9uIGZvciBkZXRhaWwKICAvLyBzaG91bGQgcmV0dXJuCiAgLyoKICB7CiAgICBzZXJ2aWNlczogb2JqZWN0LAogICAgaGFuZGxlUkNFdmVudHM6IGZ1bmN0aW9uCiAgfQogICovCiAgdGhpcmRQYXJ0eVNlcnZpY2VDb25maWc6IChzZXJ2aWNlTmFtZSkgPT4gY29uc29sZS5sb2coc2VydmljZU5hbWUpLAoKICAvLyBhZnRlciBpbml0IGNhbGxiYWNrIGZ1bmN0aW9uLCBjYW4gZG8gc29tZSBleHRyYSBpbml0IGhlcmUKICBpbml0VGhpcmRQYXJ0eTogKCkgPT4gbnVsbAp9Cgp3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGNyZWF0ZUFwcChjb25maWcpKQoK</textarea>
<textarea class="saurus-file" data-file="../src/content.js" data-mode="javascript">Ci8qKgogKiBjb250ZW50LmpzIGZvciBjaHJvbWUgZXh0ZW5zaW9uCiAqLwoKaW1wb3J0IGNyZWF0ZUFwcCBmcm9tICdyaW5nY2VudHJhbC1lbWJlZGRhYmxlLWV4dGVuc2lvbi1jb21tb24vc3JjL3NwYS9pbml0JwppbXBvcnQgKiBhcyBjb25maWcgZnJvbSAnLi9jb25maWcnCmltcG9ydCB7cmluZ0NlbnRyYWxDb25maWdzfSBmcm9tICdyaW5nY2VudHJhbC1lbWJlZGRhYmxlLWV4dGVuc2lvbi1jb21tb24vc3JjL2NvbW1vbi9hcHAtY29uZmlnJwppbXBvcnQgJ3JpbmdjZW50cmFsLWVtYmVkZGFibGUtZXh0ZW5zaW9uLWNvbW1vbi9zcmMvc3BhL3N0eWxlLnN0eWwnCmltcG9ydCAnLi9jdXN0b20uc3R5bCcKCmxldCB7CiAgY2xpZW50SUQsCiAgYXBwU2VydmVyCn0gPSByaW5nQ2VudHJhbENvbmZpZ3MKCmxldCBhcHBDb25maWdRdWVyeSA9ICcnCmlmIChjbGllbnRJRCB8fCBhcHBTZXJ2ZXIpIHsKICBhcHBDb25maWdRdWVyeSA9IGA/Y2xpZW50SUQ9JHtjbGllbnRJRH0mYXBwU2VydmVyPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGFwcFNlcnZlcil9YAp9CgovKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgKi8KOyhmdW5jdGlvbigpIHsKICBjb25zb2xlLmxvZygnaW1wb3J0IFJpbmdDZW50cmFsIEVtYmVkZGFibGUgVm9pY2UgdG8gd2ViIHBhZ2UnKQogIHZhciByY3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKQogIHJjcy5zcmMgPSAnaHR0cHM6Ly9yaW5nY2VudHJhbC5naXRodWIuaW8vcmluZ2NlbnRyYWwtZW1iZWRkYWJsZS9hZGFwdGVyLmpzJyArIGFwcENvbmZpZ1F1ZXJ5CiAgdmFyIHJjczAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF0KICByY3MwLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHJjcywgcmNzMCkKfSkoKQoKd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBjcmVhdGVBcHAoY29uZmlnKSkKCg==</textarea>
<textarea class="saurus-file" data-file="../src/config.js" data-mode="javascript">LyoqCiAqIGNvbnRlbnQgY29uZmlnIGZpbGUKICogd2l0aCBwcm9wZXIgY29uZmlnLAogKiBpbnNlcnQgYGNhbGwgd2l0aCByaW5nY2VudHJhbGAgYnV0dG9uCiAqIG9yIGhvdmVyIHNvbWUgZWxlbWV0IHNob3cgY2FsbCBidXR0b24gdG9vbHRpcAogKiBvciBjb252ZXJ0IHBob25lIG51bWJlciB0ZXh0IHRvIGNsaWNrLXRvLWNhbGwgbGluawogKgogKi8KCi8vLyoKaW1wb3J0IHsKICAvL1JDQlROQ0xTMiwKICBjaGVja1Bob25lTnVtYmVyCn0gZnJvbSAncmluZ2NlbnRyYWwtZW1iZWRkYWJsZS1leHRlbnNpb24tY29tbW9uL3NyYy9jb21tb24vaGVscGVycycKLy8qLwoKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJwppbXBvcnQgewogIHNob3dBdXRoQnRuLAogIHVuQXV0aCwKICBkb0F1dGgsCiAgbm90aWZ5UkNBdXRoZWQsCiAgcmVuZGVyQXV0aEJ1dHRvbgp9IGZyb20gJy4vZmVhdHVyZXMvYXV0aCcKaW1wb3J0ICogYXMgbHMgZnJvbSAncmluZ2NlbnRyYWwtZW1iZWRkYWJsZS1leHRlbnNpb24tY29tbW9uL3NyYy9jb21tb24vbHMnCgppbXBvcnQgewogIGZpbmRNYXRjaENvbnRhY3RzLAogIHNlYXJjaENvbnRhY3RzLAogIHNob3dDb250YWN0SW5mb1BhbmVsLAogIGhpZGVDb250YWN0SW5mb1BhbmVsLAogIGdldENvbnRhY3RzCn0gZnJvbSAnLi9mZWF0dXJlcy9jb250YWN0cycKaW1wb3J0IHsKICBnZXRBY3Rpdml0aWVzLAogIHNob3dBY3Rpdml0eURldGFpbAp9IGZyb20gJy4vZmVhdHVyZXMvYWN0aXZpdGllcycKaW1wb3J0IHtzeW5jQ2FsbExvZ1RvVGhpcmRQYXJ0eX0gZnJvbSAnLi9mZWF0dXJlcy9jYWxsLWxvZy1zeW5jJwoKLy8gaW5zZXJ0IGNsaWNrIHRvIGNhbGwgYnV0dG9uCmV4cG9ydCBjb25zdCBpbnNlcnRDbGlja1RvQ2FsbEJ1dHRvbiA9IFsKICAvLy8qCiAgewogICAgLy8gbXVzdCBtYXRjaCBwYWdlIHVybAogICAgdXJsQ2hlY2s6IGhyZWYgPT4gewogICAgICByZXR1cm4gL1wvcGVyc29uXC9cZCsvLnRlc3QoaHJlZikKICAgIH0sCgogICAgLy8gZGVmaW5lIGluIHRoZSBwYWdlIGhvdyB0byBnZXQgcGhvbmUgbnVtYmVyLAogICAgLy8gaWYgY2FuIG5vdCBnZXQgcGhvbmUgbnVtYmVyLCB3aWxsIG5vdCBpbnNlcnQgdGhlIGNhbGwgYnV0dG9uCiAgICAvLyBzdXBwb3J0IGFzeW5jCiAgICBnZXRDb250YWN0UGhvbmVOdW1iZXJzOiBhc3luYyAoKSA9PiB7CiAgICAgIGxldCBwaG9uZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudmlld0NvbnRhaW5lcjpub3QoW3N0eWxlKj0ibm9uZSJdKSBbZGF0YS10ZXN0PSJwaG9uZS1sYWJlbCJdJykKICAgICAgcmV0dXJuIEFycmF5LmZyb20ocGhvbmVzKS5tYXAocCA9PiB7CiAgICAgICAgbGV0IHRpdGxlID0gcC5wYXJlbnROb2RlLm5leHRTaWJsaW5nLnRleHRDb250ZW50LnRyaW0oKQogICAgICAgIGxldCBpZCA9IHRpdGxlCiAgICAgICAgbGV0IG51bWJlciA9IHAudGV4dENvbnRlbnQudHJpbSgpCiAgICAgICAgaWYgKGNoZWNrUGhvbmVOdW1iZXIobnVtYmVyKSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaWQsCiAgICAgICAgICAgIHRpdGxlLAogICAgICAgICAgICBudW1iZXIKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIG51bGwKICAgICAgICB9CiAgICAgIH0pLmZpbHRlcihkID0+IGQpCiAgICB9LAoKICAgIC8vIHBhcmVudCBkb20gdG8gaW5zZXJ0IGNhbGwgYnV0dG9uCiAgICAvLyBjYW4gYmUgbXVsdGlwbGUgY29uZGl0aW9uCiAgICAvLyB0aGUgZmlyc3Qgb25lIG1hdGNoZXMsIHJlc3QgdGhlIGFycmF5IHdpbGwgYmUgaWdub3JlZAogICAgcGFyZW50c1RvSW5zZXJ0QnV0dG9uOiBbCiAgICAgIHsKICAgICAgICBnZXRFbGVtOiAoKSA9PiB7CiAgICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZXdDb250YWluZXI6bm90KFtzdHlsZSo9Im5vbmUiXSkgLmRldGFpbFZpZXcucGVyc29uRGV0YWlscyAuaW5mb0Jsb2NrIC5zcGFjZXInKQogICAgICAgIH0sCiAgICAgICAgaW5zZXJ0TWV0aG9kOiAnaW5zZXJ0QmVmb3JlJwogICAgICB9CiAgICBdCiAgfQogIC8vKi8KXQoKLy8gaG92ZXIgY29udGFjdCBub2RlIHRvIHNob3cgY2xpY2sgdG8gZGlhbCB0b29sdGlwCmV4cG9ydCBjb25zdCBob3ZlclNob3dDbGlja1RvQ2FsbEJ1dHRvbiA9IFsKICAvLy8qCiAgLy9jb25maWcgZXhhbXBsZQogIHsKICAgIC8vIG11c3QgbWF0Y2ggdXJsCiAgICB1cmxDaGVjazogaHJlZiA9PiB7CiAgICAgIHJldHVybiAvXC9wZXJzb25zXC9saXN0XC91c2VyXC9cZCsvLnRlc3QoaHJlZikKICAgIH0sCgogICAgLy9lbGVtbWVudCBzZWxlY3RvcgogICAgc2VsZWN0b3I6ICcuZ3JpZENvbnRlbnQtLXNjcm9sbGFibGUgLmdyaWRDb250ZW50X190YWJsZSB0Ym9keSB0cicsCgogICAgLy8gZnVuY3Rpb24gdG8gZ2V0IHBob25lIG51bWJlcnMsIHN1cG9ydCBhc3luYyBmdW5jdGlvbgogICAgZ2V0Q29udGFjdFBob25lTnVtYmVyczogYXN5bmMgZWxlbSA9PiB7CiAgICAgIGxldCBwaG9uZU5vZGVzID0gZWxlbS5xdWVyeVNlbGVjdG9yQWxsKCd0ZFtkYXRhLWZpZWxkPSJwaG9uZSJdIC5ncmlkQ2VsbF9fbGluaycpCiAgICAgIHJldHVybiBBcnJheS5mcm9tKHBob25lTm9kZXMpCiAgICAgICAgLm1hcCgocCwgaSkgPT4gewogICAgICAgICAgbGV0IG51bWJlciA9IChwLmdldEF0dHJpYnV0ZSgnaHJlZicpIHx8ICcnKS5yZXBsYWNlKCdjYWxsdG86JywgJycpCiAgICAgICAgICBsZXQgdGl0bGUgPSBwLnF1ZXJ5U2VsZWN0b3IoJy5ncmlkQ2VsbF9fdmFsdWVSZW1hcmsnKQogICAgICAgICAgdGl0bGUgPSB0aXRsZSA/IHRpdGxlLnRleHRDb250ZW50LnJlcGxhY2UoL1wofFwpL2csICcnKSA6ICdEaXJlY3QnCiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpZDogJ3BfJyArIGksCiAgICAgICAgICAgIHRpdGxlLAogICAgICAgICAgICBudW1iZXIKICAgICAgICAgIH0KICAgICAgICB9KS5maWx0ZXIoZCA9PiBjaGVja1Bob25lTnVtYmVyKGQubnVtYmVyKSkKICAgIH0KICB9CiAgLy8qLwpdCgovLyBtb2RpZnkgcGhvbmUgbnVtYmVyIHRleHQgdG8gY2xpY2stdG8tY2FsbCBsaW5rCmV4cG9ydCBjb25zdCBwaG9uZU51bWJlclNlbGVjdG9ycyA9IFsKICAvLy8qIGV4YW1wbGUgY29uZmlnCiAgewogICAgdXJsQ2hlY2s6IChocmVmKSA9PiB7CiAgICAgIHJldHVybiAvXC9wZXJzb25cL1xkKy8udGVzdChocmVmKQogICAgfSwKICAgIHNlbGVjdG9yOiAnW2RhdGEtdGVzdD0icGhvbmUtbGFiZWwiXScKICB9CiAgLy8qLwpdCgovKioKICogdGhpcmRQYXJ0eVNlcnZpY2UgY29uZmlnCiAqIEBwYXJhbSB7Kn0gc2VydmljZU5hbWUKICovCmV4cG9ydCBmdW5jdGlvbiB0aGlyZFBhcnR5U2VydmljZUNvbmZpZyhzZXJ2aWNlTmFtZSkgewoKICBjb25zb2xlLmxvZyhzZXJ2aWNlTmFtZSwgJ3NlcnZpY2VOYW1lJykKCiAgbGV0IHNlcnZpY2VzID0gewogICAgbmFtZTogc2VydmljZU5hbWUsCiAgICAvLyAvLyBzaG93IGNvbnRhY3RzIGluIHJpbmdjZW50cmFsIHdpZGdldHMKICAgIGNvbnRhY3RzUGF0aDogJy9jb250YWN0cycsCiAgICBjb250YWN0U2VhcmNoUGF0aDogJy9jb250YWN0cy9zZWFyY2gnLAogICAgY29udGFjdE1hdGNoUGF0aDogJy9jb250YWN0cy9tYXRjaCcsCgogICAgLy8gc2hvdyBhdXRoL2F1YXV0aCBidXR0b24gaW4gcmluZ2NlbnRyYWwgd2lkZ2V0cwogICAgYXV0aG9yaXphdGlvblBhdGg6ICcvYXV0aG9yaXplJywKICAgIGF1dGhvcml6ZWRUaXRsZTogJ1VuYXV0aG9yaXplJywKICAgIHVuYXV0aG9yaXplZFRpdGxlOiAnQXV0aG9yaXplJywKICAgIGF1dGhvcml6ZWQ6IGZhbHNlLAoKICAgIC8vIEVuYWJsZSBjYWxsIGxvZyBzeW5jIGZlYXR1cmUKICAgIGNhbGxMb2dnZXJQYXRoOiAnL2NhbGxMb2dnZXInLAogICAgY2FsbExvZ2dlclRpdGxlOiBgTG9nIHRvICR7c2VydmljZU5hbWV9YCwKCiAgICAvLyBzaG93IGNvbnRhY3QgYWN0aXZpdGllcyBpbiByaW5nY2VudHJhbCB3aWRnZXRzCiAgICBhY3Rpdml0aWVzUGF0aDogJy9hY3Rpdml0aWVzJywKICAgIGFjdGl2aXR5UGF0aDogJy9hY3Rpdml0eScKICB9CgogIC8vIGhhbmRsZSByaW5nY2VudHJhbCBldmVudAogIGxldCBoYW5kbGVSQ0V2ZW50cyA9IGFzeW5jIGUgPT4gewogICAgY29uc29sZS5sb2coZSkKICAgIGxldCB7ZGF0YX0gPSBlCiAgICBpZiAoIWRhdGEpIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICBsZXQge3R5cGUsIGxvZ2dlZEluLCBwYXRoLCBjYWxsfSA9IGRhdGEKICAgIGlmICh0eXBlID09PSAgJ3JjLWxvZ2luLXN0YXR1cy1ub3RpZnknKSB7CiAgICAgIGNvbnNvbGUubG9nKCdyYyBsb2dpbmVkJywgbG9nZ2VkSW4pCiAgICAgIHdpbmRvdy5yYy5yY0xvZ2luZWQgPSBsb2dnZWRJbgogICAgfQogICAgaWYgKAogICAgICB0eXBlID09PSAncmMtcm91dGUtY2hhbmdlZC1ub3RpZnknICYmCiAgICAgIHBhdGggPT09ICcvY29udGFjdHMnICYmCiAgICAgICF3aW5kb3cucmMudXNlckF1dGhlZAogICAgKSB7CiAgICAgIHNob3dBdXRoQnRuKCkKICAgIH0gZWxzZSBpZiAoCiAgICAgIHR5cGUgPT09ICdyYy1hY3RpdmUtY2FsbC1ub3RpZnknIHx8CiAgICAgIHR5cGUgPT09ICdyYy1jYWxsLXN0YXJ0LW5vdGlmeScKICAgICkgewogICAgICBzaG93Q29udGFjdEluZm9QYW5lbChjYWxsKQogICAgfSBlbHNlIGlmICgncmMtY2FsbC1lbmQtbm90aWZ5JyA9PT0gdHlwZSkgewogICAgICBoaWRlQ29udGFjdEluZm9QYW5lbCgpCiAgICB9CiAgICBpZiAodHlwZSAhPT0gJ3JjLXBvc3QtbWVzc2FnZS1yZXF1ZXN0JykgewogICAgICByZXR1cm4KICAgIH0KCiAgICBsZXQge3JjfSA9IHdpbmRvdwoKICAgIGlmIChkYXRhLnBhdGggPT09ICcvYXV0aG9yaXplJykgewogICAgICBpZiAocmMudXNlckF1dGhlZCkgewogICAgICAgIHVuQXV0aCgpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgZG9BdXRoKCkKICAgICAgfQogICAgICByYy5wb3N0TWVzc2FnZSh7CiAgICAgICAgdHlwZTogJ3JjLXBvc3QtbWVzc2FnZS1yZXNwb25zZScsCiAgICAgICAgcmVzcG9uc2VJZDogZGF0YS5yZXF1ZXN0SWQsCiAgICAgICAgcmVzcG9uc2U6IHsgZGF0YTogJ29rJyB9CiAgICAgIH0pCiAgICB9CiAgICBlbHNlIGlmIChwYXRoID09PSAnL2NvbnRhY3RzJykgewogICAgICBsZXQgY29udGFjdHMgPSBhd2FpdCBnZXRDb250YWN0cygpCiAgICAgIHJjLnBvc3RNZXNzYWdlKHsKICAgICAgICB0eXBlOiAncmMtcG9zdC1tZXNzYWdlLXJlc3BvbnNlJywKICAgICAgICByZXNwb25zZUlkOiBkYXRhLnJlcXVlc3RJZCwKICAgICAgICByZXNwb25zZTogewogICAgICAgICAgZGF0YTogY29udGFjdHMsCiAgICAgICAgICBuZXh0UGFnZTogbnVsbAogICAgICAgIH0KICAgICAgfSkKICAgIH0KICAgIGVsc2UgaWYgKHBhdGggPT09ICcvY29udGFjdHMvc2VhcmNoJykgewogICAgICBsZXQgY29udGFjdHMgPSBhd2FpdCBnZXRDb250YWN0cygpCiAgICAgIGxldCBrZXl3b3JkID0gXy5nZXQoZGF0YSwgJ2JvZHkuc2VhcmNoU3RyaW5nJykKICAgICAgaWYgKGtleXdvcmQpIHsKICAgICAgICBjb250YWN0cyA9IHNlYXJjaENvbnRhY3RzKGNvbnRhY3RzLCBrZXl3b3JkKQogICAgICB9CiAgICAgIHJjLnBvc3RNZXNzYWdlKHsKICAgICAgICB0eXBlOiAncmMtcG9zdC1tZXNzYWdlLXJlc3BvbnNlJywKICAgICAgICByZXNwb25zZUlkOiBkYXRhLnJlcXVlc3RJZCwKICAgICAgICByZXNwb25zZTogewogICAgICAgICAgZGF0YTogY29udGFjdHMKICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgICBlbHNlIGlmIChwYXRoID09PSAnL2NvbnRhY3RzL21hdGNoJykgewogICAgICBsZXQgY29udGFjdHMgPSBhd2FpdCBnZXRDb250YWN0cygpCiAgICAgIGxldCBwaG9uZU51bWJlcnMgPSBfLmdldChkYXRhLCAnYm9keS5waG9uZU51bWJlcnMnKSB8fCBbXQogICAgICBsZXQgcmVzID0gZmluZE1hdGNoQ29udGFjdHMoY29udGFjdHMsIHBob25lTnVtYmVycykKICAgICAgcmMucG9zdE1lc3NhZ2UoewogICAgICAgIHR5cGU6ICdyYy1wb3N0LW1lc3NhZ2UtcmVzcG9uc2UnLAogICAgICAgIHJlc3BvbnNlSWQ6IGRhdGEucmVxdWVzdElkLAogICAgICAgIHJlc3BvbnNlOiB7CiAgICAgICAgICBkYXRhOiByZXMKICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgICBlbHNlIGlmIChwYXRoID09PSAnL2NhbGxMb2dnZXInKSB7CiAgICAgIC8vIGFkZCB5b3VyIGNvZGVzIGhlcmUgdG8gbG9nIGNhbGwgdG8geW91ciBzZXJ2aWNlCiAgICAgIHN5bmNDYWxsTG9nVG9UaGlyZFBhcnR5KGRhdGEuYm9keSkKICAgICAgLy8gcmVzcG9uc2UgdG8gd2lkZ2V0CiAgICAgIHJjLnBvc3RNZXNzYWdlKHsKICAgICAgICB0eXBlOiAncmMtcG9zdC1tZXNzYWdlLXJlc3BvbnNlJywKICAgICAgICByZXNwb25zZUlkOiBkYXRhLnJlcXVlc3RJZCwKICAgICAgICByZXNwb25zZTogeyBkYXRhOiAnb2snIH0KICAgICAgfSkKICAgIH0KICAgIGVsc2UgaWYgKHBhdGggPT09ICcvYWN0aXZpdGllcycpIHsKICAgICAgY29uc3QgYWN0aXZpdGllcyA9IGF3YWl0IGdldEFjdGl2aXRpZXMoZGF0YS5ib2R5KQogICAgICAvKgogICAgICBbCiAgICAgICAgewogICAgICAgICAgaWQ6ICcxMjMnLAogICAgICAgICAgc3ViamVjdDogJ1RpdGxlJywKICAgICAgICAgIHRpbWU6IDE1Mjg4NTQ3MDI0NzIKICAgICAgICB9CiAgICAgIF0KICAgICAgKi8KICAgICAgLy8gcmVzcG9uc2UgdG8gd2lkZ2V0CiAgICAgIHJjLnBvc3RNZXNzYWdlKHsKICAgICAgICB0eXBlOiAncmMtcG9zdC1tZXNzYWdlLXJlc3BvbnNlJywKICAgICAgICByZXNwb25zZUlkOiBkYXRhLnJlcXVlc3RJZCwKICAgICAgICByZXNwb25zZTogeyBkYXRhOiBhY3Rpdml0aWVzIH0KICAgICAgfSkKICAgIH0KICAgIGVsc2UgaWYgKHBhdGggPT09ICcvYWN0aXZpdHknKSB7CiAgICAgIC8vIHJlc3BvbnNlIHRvIHdpZGdldAogICAgICBzaG93QWN0aXZpdHlEZXRhaWwoZGF0YS5ib2R5KQogICAgICByYy5wb3N0TWVzc2FnZSh7CiAgICAgICAgdHlwZTogJ3JjLXBvc3QtbWVzc2FnZS1yZXNwb25zZScsCiAgICAgICAgcmVzcG9uc2VJZDogZGF0YS5yZXF1ZXN0SWQsCiAgICAgICAgcmVzcG9uc2U6IHsgZGF0YTogJ29rJyB9CiAgICAgIH0pCiAgICB9CiAgfQogIHJldHVybiB7CiAgICBzZXJ2aWNlcywKICAgIGhhbmRsZVJDRXZlbnRzCiAgfQp9CgovKioKICogaW5pdCB0aGlyZCBwYXJ0eQogKiBjb3VsZCBpbml0IGRvbSBpbnNlcnQgZXRjIGhlcmUKICovCmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0VGhpcmRQYXJ0eSgpIHsKICBsZXQgdXNlckF1dGhlZCA9IGF3YWl0IGxzLmdldCgndXNlckF1dGhlZCcpIHx8IGZhbHNlCiAgd2luZG93LnJjLnVzZXJBdXRoZWQgPSB1c2VyQXV0aGVkCiAgLy9nZXQgdGhlIGh0bWwgcmVhZHkKICByZW5kZXJBdXRoQnV0dG9uKCkKICBpZiAod2luZG93LnJjLnVzZXJBdXRoZWQpIHsKICAgIG5vdGlmeVJDQXV0aGVkKCkKICB9Cn0KCi8vIGluaXQgY2FsbCB3aXRoIHJpbmdjZW5udHJhbCBidXR0b24gYXQgcGFnZSBib3R0b20KLy8gZW5iYWxlZCBieSBkZWZhdWx0LCBjaGFuZ2UgdG8gZmFsc2UgdG8gZGlzYWJsZSBpdApleHBvcnQgY29uc3QgaW5pdENhbGxCdXR0b24gPSB0cnVlCg==</textarea>
<textarea class="saurus-file" data-file="../src/background.js" data-mode="javascript">aW1wb3J0IGluaXRCYWNrZ3JvdW5kIGZyb20gJ3JpbmdjZW50cmFsLWVtYmVkZGFibGUtZXh0ZW5zaW9uLWNvbW1vbi9zcmMvc3BhL2JhY2tncm91bmQnCgovKioKICogZm9yIGJhY2tncm91bmQuanMsIGNoZWNrIGN1cnJlbnQgdGFiIGlzIGV4dGVuc2lvbiB0YXJnZXQgdGFiIG9yIG5vdAogKiBAcGFyYW0ge29iamVjdH0gdGFiCiAqLwpleHBvcnQgZnVuY3Rpb24gY2hlY2tUYWIodGFiKSB7CiAgcmV0dXJuIC9odHRwczpcL1wvLitcLnBpcGVkcml2ZS5jb21cLy4rLy50ZXN0KHRhYi51cmwpCiAgLyoqIHVybCBjaGVjayBleGFtcGxlcwogICAgdGFiLnVybC5zdGFydHNXaXRoKCdodHRwczovL2FwcC5odWJzcG90LmNvbScpICYmCiAgICAhdGFiLnVybC5zdGFydHNXaXRoKCdodHRwczovL2FwcC5odWJzcG90LmNvbS9sb2dpbicpICYmCiAgICAhdGFiLnVybC5zdGFydHNXaXRoKCdodHRwczovL2FwcC5odWJzcG90LmNvbS9teWFjY291bnRzLWJldGEnKSAmJgogICAgIXRhYi51cmwuc3RhcnRzV2l0aCgnaHR0cHM6Ly9hcHAuaHVic3BvdC5jb20vZGV2ZWxvcGVyJykKICAgKi8KfQoKaW5pdEJhY2tncm91bmQoY2hlY2tUYWIpCg==</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><div class="saurus-file-actions"><a href="https://github.com/ringcentral-tutorials/build-chrome-ringcentral-widgets-extension-for-crm" target="_blank" class="explorer-get-code"><i class="fa fa-lg fa-github-square"></i>View Code on GitHub</a><a href="https://github.com/ringcentral-tutorials/build-chrome-ringcentral-widgets-extension-for-crm/archive/master.zip" target="_blank" class="explorer-get-code"><i class="fa fa-lg icon-download"></i>Download Source Code</a></div></div></div></div><footer><div class="footer-content"><div class="footer-content-row layout-2-cols"><div class="footer-content-row-left"><div class="footer-logo"><a href="http://www.ringcentral.com"><span>Back to the main site</span></a></div></div><div class="footer-content-row-right"><ul class="footer-text-links"><li><a href="http://www.ringcentral.com/legal.html" target="_blank"><span>Legal</span></a></li><li><a href="http://www.ringcentral.com/security-statement.html" target="_blank"><span>Security Policy</span></a></li><li><a href="http://www.ringcentral.com/legal/privacy-policy.html" target="_blank"><span>Privacy Policy</span></a></li><li><a ng-href="https://devcommunity.ringcentral.com" target="_blank" href="https://devcommunity.ringcentral.com"><span>Community</span></a></li><li><a href="https://medium.com/ringcentral-developers" target="_blank"><span>Blog</span></a></li></ul></div></div><div class="footer-content-row footer-content-row-last layout-2-cols"><div class="footer-content-row-left"><span class="footer-copyright">© 1999-<span ng-bind="::main.nowObj|date:'yyyy'" class="footer-copyright-to ng-binding">2017</span> RingCentral, Inc. All rights reserved.</span></div><div class="footer-content-row-right"><div class="footer-image-links"><div class="footer-image-link footer-image-link-facebook"><a target="_blank" href="http://www.facebook.com/ringcentral"><i class="fa icon-facebook"></i></a></div><div class="footer-image-link footer-image-link-twitter"><a target="_blank" href="http://twitter.com/ringcentraldevs"><i class="fa icon-twitter"></i></a></div><div class="footer-image-link footer-image-link-google-plus"><a target="_blank" href="https://www.google.com/+ringcentral"><i class="fa icon-google_plus"></i></a></div><div class="footer-image-link footer-image-link-linkedin"><a target="_blank" href="http://www.linkedin.com/company/ringcentral"><i class="fa icon-linkedin"></i></a></div><div class="footer-image-link footer-image-link-youtube"><a target="_blank" href="http://www.youtube.com/ringcentral"><i class="fa icon-youtube"></i></a></div></div></div></div></div></footer></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script><script>window.tutorialName="Build Chrome RingCentral widgets extension for CRM";</script><script src="viewsaurus.js"></script></body></html>